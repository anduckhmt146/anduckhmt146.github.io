---
layout: post
title: Framework Thinking - Neetcode 150 - Reverse Linked List
date: 2025-11-28
categories: coding-practice
---

Here is solutions for Reverse Linked List.

# 1. Understand the Problem

Given the head of a singly linked list, reverse the list and return the new head.

Example:

```python
1 â†’ 2 â†’ 3 â†’ 4 â†’ 5 â†’ NULL
Output: 5 â†’ 4 â†’ 3 â†’ 2 â†’ 1 â†’ NULL
```

# 2. Clarify Constraints (Ask 4â€“5 Questions)

1. Can the list be empty? â†’ Yes, return None.

2. Is modifying the original list allowed? â†’ Yes.

3. Only singly linked list, no extra pointers (prev) available? â†’ Yes.

4. Time and space constraints?

   - â± Time: O(n)

   - ğŸ’¾ Space: O(1) extra (in-place preferred)

5. Do I need to handle very large lists?

â†’ Yes, iterative preferred to avoid recursion depth issues.

# 3. Explore examples

| Input                      | Output                     |
| -------------------------- | -------------------------- |
| `None`                     | `None`                     |
| `1 â†’ NULL`                 | `1 â†’ NULL`                 |
| `1 â†’ 2 â†’ 3 â†’ NULL`         | `3 â†’ 2 â†’ 1 â†’ NULL`         |
| `10 â†’ 20 â†’ 30 â†’ 40 â†’ NULL` | `40 â†’ 30 â†’ 20 â†’ 10 â†’ NULL` |

# 4. Brainstorm 2-3 solutions

## 4.1. Solution 1 â€“ Naive (Recursive) - Time O(N), Space O(N)

- Recursively reverse rest of list and reattach head.

- âŒ Uses O(n) stack â†’ not optimal.

- Time: O(N).

- Space: O(N).

## 4.2. Solution 2 â€“ Optimized (Iterative) - Time O(N), Space O(1)

- Use three pointers: prev, cur, next.

- Reverse links while traversing.

- Time: O(N).

- Space: O(1).

# 5. Implement solutions

## 5.1. Recursion - Time O(N), Space O(N)

- Idea:

  - Use newHead to store the address of the last node of reverse head.

  - Each node when recursive return the address of the head in reverse order.

  - Each node has a fixed address - limit to create new address block.

```python
# Definition for singly-linked list.
# class ListNode:
#     def __init__(self, val=0, next=None):
#         self.val = val
#         self.next = next

class Solution:
    def reverseList(self, head: Optional[ListNode]) -> Optional[ListNode]:
        if not head:
            return None

        newHead = head
        if head.next:
            newHead = self.reverseList(head.next)
            head.next.next = head
        head.next = None

        return newHead
```

- Explain:

```python
reverseList(1)
  reverseList(2)
    reverseList(3)
      reverseList(4)
        returns 4 (base case)

```

At node 3:

```python
newHead = 4
head = 3
head.next = 4
head.next.next = 3  # 4.next = 3
head.next = None    # 3.next = None
```

- Time: O(N).

- Space: O(N) for recursion stack.

## 5.2. Use 3 pointer: prev, curr, next - Time: O(N), Space: O(1)

```python
# Definition for singly-linked list.
# class ListNode:
#     def __init__(self, val=0, next=None):
#         self.val = val
#         self.next = next

class Solution:
    def reverseList(self, head: ListNode) -> ListNode:
        prev, curr = None, head

        while curr:
            temp = curr.next
            curr.next = prev
            prev = curr
            curr = temp
        return prev
```

- Time: O(N).

- Space: O(1).

# 6. Dry run examples

- Reverse: [1 -> 2 -> 3 -> 4 -> 5]

| Step | `curr` | `temp` (curr.next) | `prev` (previous node) | Action                              | List Update                    |
| ---- | ------ | ------------------ | ---------------------- | ----------------------------------- | ------------------------------ |
| Init | 1      | -                  | None                   | start                               | `None â† 1 â†’ 2 â†’ 3 â†’ 4`         |
| 1    | 1      | 2                  | None                   | 1.next = None â†’ prev = 1 â†’ curr = 2 | `1 â†’ None`, `2 â†’ 3 â†’ 4`        |
| 2    | 2      | 3                  | 1                      | 2.next = 1 â†’ prev = 2 â†’ curr = 3    | `2 â†’ 1 â†’ None`, `3 â†’ 4`        |
| 3    | 3      | 4                  | 2                      | 3.next = 2 â†’ prev = 3 â†’ curr = 4    | `3 â†’ 2 â†’ 1 â†’ None`, `4 â†’ None` |
| 4    | 4      | None               | 3                      | 4.next = 3 â†’ prev = 4 â†’ curr = None | `4 â†’ 3 â†’ 2 â†’ 1 â†’ None`         |
| End  | None   | -                  | **4**                  | return prev                         | **Final result**               |
